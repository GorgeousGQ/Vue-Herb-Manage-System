"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[280],{6280:function(t,e,l){l.r(e),l.d(e,{default:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",[e("el-table",{attrs:{data:t.articles,border:"",stripe:"","header-cell-class-name":t.headerBg}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"50",align:"center"}}),e("el-table-column",{attrs:{prop:"title",label:"文章标题",width:"150"}}),e("el-table-column",{attrs:{prop:"pic",label:"文章图片"},scopedSlots:t._u([{key:"default",fn:function({row:t,$index:l}){return[e("img",{staticStyle:{width:"100px"},attrs:{src:"http://8.130.20.53/image"+t.pic[0],alt:""}})]}}])}),e("el-table-column",{attrs:{prop:"authorId",label:"文章作者ID",width:"150"}}),e("el-table-column",{attrs:{prop:"likes",label:"文章获赞量",width:"150"}}),e("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function({row:l,$index:a}){return[e("el-button",{staticStyle:{padding:"7px 10px","font-size":"10px"},attrs:{type:"warning"},on:{click:function(e){return t.approvalArticles(l)}}},[t._v("查看详情"),e("i",{staticClass:"el-icon-edit-outline",staticStyle:{"padding-left":"2px"}})])]}}])})],1),e("div",{staticStyle:{padding:"10px 0"}},[e("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"page-sizes":t.pageSizes,"page-size":t.pageSize,currentPage:t.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),e("el-dialog",{attrs:{title:"审核文章",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{staticStyle:{width:"80%"},attrs:{model:t.currentArticles}},[e("el-form-item",{attrs:{label:"文章标题","label-width":"100px"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.currentArticles.title,callback:function(e){t.$set(t.currentArticles,"title",e)},expression:"currentArticles.title"}})],1),e("el-form-item",{attrs:{label:"文章概述","label-width":"100px"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.currentArticles.articledesc,callback:function(e){t.$set(t.currentArticles,"articledesc",e)},expression:"currentArticles.articledesc"}})],1),e("el-form-item",{attrs:{label:"文章正文","label-width":"100px"}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:13},autocomplete:"off"},model:{value:t.currentArticles.content,callback:function(e){t.$set(t.currentArticles,"content",e)},expression:"currentArticles.content"}})],1),e("el-form-item",{attrs:{label:"文章标签","label-width":"100px"}},[e("el-select",{attrs:{placeholder:"请选择文章标签",value:""}},[e("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.ArticleApproval}},[t._v("审核通过")]),e("el-button",{attrs:{type:"danger"},on:{click:t.ArticleNotApproval}},[t._v("审核不通过")])],1)],1)],1)},r=[],i={name:"Articles",data(){return{articles:[],total:0,currentPage:1,pageSize:5,pageSizes:[5,7,10],headerBg:"headerBg",dialogFormVisible:!1,imageUrl:"",currentArticles:{}}},mounted(){this.getNotApprovalArticleInfo(),this.getNotApprovalArticlesLength()},methods:{getNotApprovalArticleInfo(){this.$axios.get("/admin/getNotApprovalUserArticles",{params:{pageSize:this.pageSize,currentPage:this.currentPage}}).then((t=>{200==t.status&&(this.articles=t.data)}))},getNotApprovalArticlesLength(){this.$axios.get("/admin/getNotApprovalUserArticlesLength").then((t=>{200==t.status&&(this.total=JSON.parse(t.data[0].id))}))},handleCurrentChange(t){this.currentPage=t,this.getNotApprovalArticleInfo()},handleSizeChange(t){this.pageSize=t,this.getNotApprovalArticleInfo()},approvalArticles(t){this.currentArticles={...t},this.dialogFormVisible=!0},handleAvatarSuccess(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload(t){const e="image/jpeg"===t.type,l=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),l||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&l},ArticleApproval(){this.$axios.post("/admin/approvalSuccessArticleInfo",{id:this.currentArticles.id}).then((t=>{200==t.status&&this.$message({type:"success",message:"审核通过!"})})),this.dialogFormVisible=!1},ArticleNotApproval(){this.$axios.post("/admin/approvalFailure",{id:this.currentArticles.id}).then((t=>{200==t.status&&this.$message({type:"success",message:"审核不通过，该文章将被打回，无法发布。"})})),this.dialogFormVisible=!1}}},s=i,o=l(1001),n=(0,o.Z)(s,a,r,!1,null,null,null),c=n.exports}}]);
//# sourceMappingURL=280.034f543a.js.map