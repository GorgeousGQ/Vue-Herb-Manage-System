{"version":3,"file":"js/280.034f543a.js","mappings":"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","sources":["webpack://app/./src/views/Manager/ArticlesApproval/index.vue","webpack://app/src/views/Manager/ArticlesApproval/index.vue","webpack://app/./src/views/Manager/ArticlesApproval/index.vue?e99d","webpack://app/./src/views/Manager/ArticlesApproval/index.vue?cff8"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-table',{attrs:{\"data\":_vm.articles,\"border\":\"\",\"stripe\":\"\",\"header-cell-class-name\":_vm.headerBg}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"序号\",\"width\":\"50\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"文章标题\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"pic\",\"label\":\"文章图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function({row,$index}){return [_c('img',{staticStyle:{\"width\":\"100px\"},attrs:{\"src\":'http://8.130.20.53/image' + row.pic[0],\"alt\":\"\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"authorId\",\"label\":\"文章作者ID\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"likes\",\"label\":\"文章获赞量\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function({row,$index}){return [_c('el-button',{staticStyle:{\"padding\":\"7px 10px\",\"font-size\":\"10px\"},attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.approvalArticles(row)}}},[_vm._v(\"查看详情\"),_c('i',{staticClass:\"el-icon-edit-outline\",staticStyle:{\"padding-left\":\"2px\"}})])]}}])})],1),_c('div',{staticStyle:{\"padding\":\"10px 0\"}},[_c('el-pagination',{staticStyle:{\"text-align\":\"center\"},attrs:{\"page-sizes\":_vm.pageSizes,\"page-size\":_vm.pageSize,\"currentPage\":_vm.currentPage,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange,\"size-change\":_vm.handleSizeChange}})],1),_c('el-dialog',{attrs:{\"title\":\"审核文章\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{staticStyle:{\"width\":\"80%\"},attrs:{\"model\":_vm.currentArticles}},[_c('el-form-item',{attrs:{\"label\":\"文章标题\",\"label-width\":\"100px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.currentArticles.title),callback:function ($$v) {_vm.$set(_vm.currentArticles, \"title\", $$v)},expression:\"currentArticles.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"文章概述\",\"label-width\":\"100px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.currentArticles.articledesc),callback:function ($$v) {_vm.$set(_vm.currentArticles, \"articledesc\", $$v)},expression:\"currentArticles.articledesc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"文章正文\",\"label-width\":\"100px\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows:13},\"autocomplete\":\"off\"},model:{value:(_vm.currentArticles.content),callback:function ($$v) {_vm.$set(_vm.currentArticles, \"content\", $$v)},expression:\"currentArticles.content\"}})],1),_c('el-form-item',{attrs:{\"label\":\"文章标签\",\"label-width\":\"100px\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择文章标签\",\"value\":\"\"}},[_c('el-option',{attrs:{\"label\":\"区域一\",\"value\":\"shanghai\"}}),_c('el-option',{attrs:{\"label\":\"区域二\",\"value\":\"beijing\"}})],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.ArticleApproval}},[_vm._v(\"审核通过\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.ArticleNotApproval}},[_vm._v(\"审核不通过\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n      <!-- <div style=\"padding:10px 0;\">\r\n        <el-input type=\"text\" style=\"width:240px;\" placeholder=\"请输入想要搜索的内容\" suffix-icon=\"el-icon-search\"></el-input><el-button type=\"primary\" style=\"margin-left:5px;\">搜索</el-button>\r\n      </div> -->\r\n      <el-table :data=\"articles\" border stripe :header-cell-class-name=\"headerBg\">\r\n        <el-table-column prop=\"id\" label=\"序号\" width=\"50\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"title\" label=\"文章标题\" width=\"150\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"pic\" label=\"文章图片\">\r\n          <template slot-scope=\"{row,$index}\">\r\n            <img :src=\"'http://8.130.20.53/image' + row.pic[0]\" alt=\"\" style=\"width:100px;\">\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"authorId\" label=\"文章作者ID\" width=\"150\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"likes\" label=\"文章获赞量\" width=\"150\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" label=\"操作\">\r\n          <template slot-scope=\"{row,$index}\">\r\n            <el-button type=\"warning\" style=\"padding:7px 10px;font-size:10px;\" @click=\"approvalArticles(row)\">查看详情<i class=\"el-icon-edit-outline\" style=\"padding-left:2px;\"></i></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div style=\"padding:10px 0;\">\r\n        <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          @size-change=\"handleSizeChange\"\r\n          style=\"text-align:center\"\r\n          :page-sizes=\"pageSizes\"\r\n          :page-size=\"pageSize\"\r\n          :currentPage=\"currentPage\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n\r\n      <!-- 对话框 visible.sync -->\r\n      <el-dialog title=\"审核文章\" :visible.sync=\"dialogFormVisible\">\r\n        <el-form style=\"width:80%;\" :model=\"currentArticles\">\r\n          <el-form-item label=\"文章标题\" label-width=\"100px\">\r\n            <el-input v-model=\"currentArticles.title\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章概述\" label-width=\"100px\">\r\n            <el-input v-model=\"currentArticles.articledesc\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章正文\" label-width=\"100px\">\r\n            <el-input type=\"textarea\" :autosize=\"{minRows:13}\" v-model=\"currentArticles.content\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章标签\" label-width=\"100px\">\r\n          <el-select placeholder=\"请选择文章标签\" value=\"\">\r\n              <el-option label=\"区域一\" value=\"shanghai\"></el-option>\r\n              <el-option label=\"区域二\" value=\"beijing\"></el-option>\r\n          </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"ArticleApproval\">审核通过</el-button>\r\n          <el-button type=\"danger\" @click=\"ArticleNotApproval\">审核不通过</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n      name:'Articles',\r\n      data(){\r\n          return{\r\n              articles:[],\r\n              total: 0,\r\n              currentPage: 1,\r\n              pageSize: 5,\r\n              pageSizes: [5,7,10],\r\n              headerBg:'headerBg',\r\n              //对话框控制显示与隐藏\r\n              dialogFormVisible:false,\r\n              //上传图片\r\n              imageUrl: '',\r\n              //收集到的当前点击的信息\r\n              currentArticles:{}\r\n          }\r\n      },\r\n      mounted(){\r\n          this.getNotApprovalArticleInfo()\r\n          this.getNotApprovalArticlesLength()\r\n      },\r\n      methods:{\r\n          //获取文章数据\r\n          getNotApprovalArticleInfo(){\r\n            this.$axios.get('/admin/getNotApprovalUserArticles',{\r\n              params:{\r\n                  pageSize:this.pageSize,\r\n                  currentPage:this.currentPage,\r\n              }\r\n            }).then(res=>{\r\n              if(res.status == 200){\r\n                this.articles = res.data\r\n              }\r\n              // console.log(this.articles);\r\n            })\r\n          },\r\n          //获取待审核的文章数量\r\n          getNotApprovalArticlesLength(){\r\n            this.$axios.get('/admin/getNotApprovalUserArticlesLength').then(res=>{\r\n              if(res.status == 200){\r\n                // console.log(res);\r\n                this.total = JSON.parse(res.data[0].id)\r\n              }\r\n            })\r\n          },\r\n          handleCurrentChange(pager){\r\n            this.currentPage = pager\r\n            this.getNotApprovalArticleInfo()\r\n          },\r\n          handleSizeChange(limit){\r\n            this.pageSize = limit\r\n            this.getNotApprovalArticleInfo()\r\n          },\r\n          //点击查看详情按钮\r\n          approvalArticles(row){\r\n            //row就是当前用户选中的信息\r\n            // console.log(row);\r\n            this.currentArticles = {...row}\r\n            this.dialogFormVisible = true\r\n\r\n          },\r\n          handleAvatarSuccess(res, file) {\r\n            this.imageUrl = URL.createObjectURL(file.raw);\r\n          },\r\n          beforeAvatarUpload(file) {\r\n              const isJPG = file.type === 'image/jpeg';\r\n              const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n              if (!isJPG) {\r\n              this.$message.error('上传头像图片只能是 JPG 格式!');\r\n              }\r\n              if (!isLt2M) {\r\n              this.$message.error('上传头像图片大小不能超过 2MB!');\r\n              }\r\n              return isJPG && isLt2M;\r\n          },\r\n          //审核通过（1为审核通过，2为审核不通过，0为正在审核中）\r\n          ArticleApproval(){\r\n            // console.log(this.currentArticles.id);\r\n            this.$axios.post('/admin/approvalSuccessArticleInfo',{id:this.currentArticles.id}).then(res=>{\r\n              if(res.status == 200){\r\n                this.$message({\r\n                    type: 'success',\r\n                    message: '审核通过!'\r\n                });\r\n              }\r\n            })\r\n            this.dialogFormVisible = false\r\n          },\r\n          //审核不通过\r\n          ArticleNotApproval(){\r\n            this.$axios.post('/admin/approvalFailure',{id:this.currentArticles.id}).then(res=>{\r\n              if(res.status == 200){\r\n                this.$message({\r\n                  type:'success',\r\n                  message:'审核不通过，该文章将被打回，无法发布。'\r\n                })\r\n              }\r\n            })\r\n            this.dialogFormVisible = false\r\n          }\r\n      }\r\n  }\r\n  </script>\r\n  \r\n  <style>\r\n  .headerBg{\r\n    background: #ddd !important;\r\n  }\r\n  /* 上传图片 */\r\n.avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n  </style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=12fb5480&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=12fb5480&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","articles","headerBg","scopedSlots","_u","key","fn","row","$index","staticStyle","pic","on","$event","approvalArticles","_v","staticClass","pageSizes","pageSize","currentPage","total","handleCurrentChange","handleSizeChange","dialogFormVisible","currentArticles","model","value","title","callback","$$v","$set","expression","articledesc","minRows","content","slot","ArticleApproval","ArticleNotApproval","staticRenderFns","name","data","imageUrl","mounted","methods","getNotApprovalArticleInfo","params","getNotApprovalArticlesLength","handleAvatarSuccess","beforeAvatarUpload","id","type","message","component"],"sourceRoot":""}