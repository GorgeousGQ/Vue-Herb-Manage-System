(function(){"use strict";var e={3044:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{padding:"10px 0"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{type:"text",placeholder:"请输入想要搜索的内容","suffix-icon":"el-icon-search"}}),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[e._v("搜索")])],1),t("el-table",{attrs:{data:e.articles,border:"",stripe:"","header-cell-class-name":e.headerBg}},[t("el-table-column",{attrs:{prop:"id",label:"序号",width:"50",align:"center"}}),t("el-table-column",{attrs:{prop:"title",label:"文章标题",width:"150"}}),t("el-table-column",{attrs:{prop:"pic",label:"文章图片"},scopedSlots:e._u([{key:"default",fn:function({row:e,$index:n}){return[t("img",{staticStyle:{width:"100px"},attrs:{src:"http://8.130.20.53/image"+e.pic[0],alt:""}})]}}])}),t("el-table-column",{attrs:{prop:"authorId",label:"文章作者ID",width:"150"}}),t("el-table-column",{attrs:{prop:"likes",label:"文章获赞量",width:"150"}}),t("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function({row:n,$index:i}){return[t("el-button",{staticStyle:{padding:"7px 10px","font-size":"10px"},attrs:{type:"success"},on:{click:function(t){return e.editArticle(n)}}},[e._v("编辑"),t("i",{staticClass:"el-icon-edit-outline",staticStyle:{"padding-left":"2px"}})]),t("el-button",{staticStyle:{padding:"7px 10px","font-size":"10px"},attrs:{type:"danger"},on:{click:function(t){return e.deleteArticles(n)}}},[e._v("删除"),t("i",{staticClass:"el-icon-delete",staticStyle:{"padding-left":"2px"}})])]}}])})],1),t("el-dialog",{attrs:{title:"审核文章",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{staticStyle:{width:"80%"},attrs:{model:e.currentArticles}},[t("el-form-item",{attrs:{label:"文章标题","label-width":"100px"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentArticles.title,callback:function(t){e.$set(e.currentArticles,"title",t)},expression:"currentArticles.title"}})],1),t("el-form-item",{attrs:{label:"文章概述","label-width":"100px"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentArticles.articledesc,callback:function(t){e.$set(e.currentArticles,"articledesc",t)},expression:"currentArticles.articledesc"}})],1),t("el-form-item",{attrs:{label:"文章正文","label-width":"100px"}},[t("quill-editor",{model:{value:e.currentArticles.content,callback:function(t){e.$set(e.currentArticles,"content",t)},expression:"currentArticles.content"}})],1),t("el-form-item",{attrs:{label:"文章标签","label-width":"100px"}},[t("el-select",{attrs:{placeholder:"请选择文章标签",value:""}},[t("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateFn()}}},[e._v("修 改")])],1)],1),t("div",{staticStyle:{padding:"10px 0"}},[t("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"page-sizes":e.pageSizes,"page-size":e.pageSize,currentPage:e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)},r=[],s={name:"Articles",data(){return{articles:[],total:0,currentPage:1,pageSize:5,pageSizes:[5,7,10],headerBg:"headerBg",dialogFormVisible:!1,imageUrl:"",currentArticles:[]}},mounted(){this.getArticlesLength(),this.getArticles()},methods:{editArticle(e){this.currentArticles=e,this.dialogFormVisible=!0},deleteArticles(e){this.currentArticles=e,console.log(this.currentArticles.id),this.$confirm("此操作将永久删除该文章，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.delete("/admin/deleteArticle",{params:{id:this.currentArticles.id}}).then((e=>{200==e.status&&this.$message({type:"success",message:"删除成功"}),this.getArticles(),this.getArticlesLength()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},getArticlesLength(){this.$axios.get("/admin/getUserArticlesLength",{headers:{Authorization:this.$store.state.token}}).then((e=>{0==e.status&&(console.log(e.data[0].length),this.total=JSON.parse(e.data[0].length))}))},getArticles(){localStorage.getItem("token");this.$axios.get("/admin/getUserArticles",{headers:{Authorization:this.$store.state.token},params:{pageSize:this.pageSize,currentPage:this.currentPage}}).then((e=>{200==e.status&&(this.articles=e.data)}))},updateFn(){this.dialogFormVisible=!1,this.$axios.post("/admin/updateArticleInfo",{currentArticleInfo:this.currentArticles,id:this.currentArticles.id}).then((e=>{200==e.status&&(this.currentArticlesInfo=e.data,this.$message({type:"success",message:"修改成功，文章将重新等待审批！"}))}))},handleCurrentChange(e){this.currentPage=e,this.getArticles()},handleSizeChange(e){this.pageSize=e,this.getArticles()}}},o=s,a=n(1001),l=(0,a.Z)(o,i,r,!1,null,null,null),c=l.exports},3802:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-container",{staticStyle:{height:"100vh"}},[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",height:"100vh","box-shadow":"2px 0 6px rgb(48,65,86)"},attrs:{width:e.sidewidth+"px"}},[t("el-menu",{attrs:{"default-openeds":["1","3"],"active-text-color":"rgb(255, 180, 68)","collapse-transition":!1,collapse:e.isCollapse,router:""},on:{select:e.handleSelect}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.logoShow,expression:"logoShow"}],staticClass:"all-title"},[e._v(" 良方本草 ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.smallLogoShow,expression:"smallLogoShow"}],staticClass:"all-title",staticStyle:{"font-size":"30px"}},[e._v(" 本草 ")]),t("el-menu-item",{attrs:{index:"/"}},[t("i",{staticClass:"el-icon-s-home"}),t("span",{staticStyle:{color:"#fff"},attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),t("el-submenu",{attrs:{index:"2"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-lock"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("权限管理")])]),2==e.permissiontype?t("el-menu-item",{attrs:{index:"/users"}},[e._v("用户管理")]):e._e(),2==e.permissiontype?t("el-menu-item",{attrs:{index:"/permission"}},[e._v("用户权限管理")]):e._e(),t("el-menu-item",{attrs:{index:"/application"}},[e._v("管理员申请")])],2),t("el-submenu",{attrs:{index:"3"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-s-order"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("文章管理")])]),t("el-menu-item",{attrs:{index:"/articles"}},[e._v("内容管理")]),t("el-menu-item",{attrs:{index:"/articlesapproval"}},[e._v("审批管理")])],2),t("el-submenu",{attrs:{index:"4"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-s-order"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("草药信息管理")])]),t("el-menu-item",{attrs:{index:"/herbs"}},[e._v("草药信息")]),t("el-menu-item",{attrs:{index:"/herbsapproval"}},[e._v("草药信息审批")])],2),t("el-submenu",{attrs:{index:"5"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-picture"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页管理")])]),t("el-menu-item",{attrs:{index:"/"}},[e._v("首页轮播图")]),t("el-menu-item",{attrs:{index:"/"}},[e._v("首页轮播图文案")]),t("el-menu-item",{attrs:{index:"/"}},[e._v("首页介绍图")])],2)],1)],1),t("el-container",[t("el-header",[t("span",{class:e.collapseBtnClass,staticStyle:{cursor:"pointer"},on:{click:e.collapse}}),t("span",{staticStyle:{color:"rgb(232, 222, 204)",padding:"0px 10px 0px 30px","font-weight":"700","font-size":"15px"}},[e._v("尊敬的")]),t("span",{staticStyle:{color:"rgb(212, 192, 154)","font-size":"15px"}},[e._v(e._s(e.permission))]),t("el-dropdown",{staticStyle:{width:"90px","text-align":"center",cursor:"pointer",float:"right"}},[t("span",[e._v(e._s(e.nickname)),t("i",{staticClass:"el-icon-arrow-down",staticStyle:{"margin-left":"10px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(t){return e.toFront()}}},[e._v("返回前端网站")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.quitFn()}}},[e._v("退出登录")])],1)],1)],1),t("el-main",[t("router-view")],1)],1)],1)],1)},r=[],s=(n(7658),n(3044)),o=n(3822),a={data(){return{collapseBtnClass:"el-icon-s-fold",isCollapse:!1,sidewidth:200,logoShow:!0,smallLogoShow:!1,permissiontype:this.$store.state.userInfo.permissiontype,permission:this.$store.state.userInfo.permission}},computed:{...(0,o.Se)(["nickname"])},components:{Articles:s["default"]},mounted(){},methods:{collapse(){this.isCollapse=!this.isCollapse,this.isCollapse?(this.sidewidth=64,this.collapseBtnClass="el-icon-s-unfold",this.logoShow=!1,this.smallLogoShow=!0):(this.sidewidth=200,this.collapseBtnClass="el-icon-s-fold",this.logoShow=!0,this.smallLogoShow=!1)},handleSelect(){},toFront(){window.location.href="http://8.130.20.53"},quitFn(){this.$confirm("这就走了吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$store.commit("updateToken",""),this.$store.commit("updateUserInfo",""),this.$router.push("/login")})).catch((()=>{}))}}},l=a,c=n(1001),u=(0,c.Z)(l,i,r,!1,null,null,null),d=u.exports},2435:function(e,t,n){var i=n(6369),r=n(8499),s=n.n(r),o=function(){var e=this,t=e._self._c;return t("div",[t("router-view")],1)},a=[],l={name:"app"},c=l,u=n(1001),d=(0,u.Z)(c,o,a,!1,null,null,null),p=d.exports,h=n(2631),m=(n(3802),n(3822)),f=(n(7658),n(4311));const g=f.Z.create({baseURL:"http://8.130.20.53:3000"});g.interceptors.request.use((e=>(y.state.token&&(e.headers.Authorization=y.state.token),e)),(function(e){return Promise.reject(e)})),g.interceptors.response.use((e=>e.data),(e=>(console.log(e),401===e.res.status&&(y.commit("updateToken",""),y.commit("updateUserInfo",{}),A.push("/login"),r.Message.error("登录状态已过期！请重新登录！")),Promise.reject(e))));var v=g;const b=()=>{localStorage.getItem("token");return v({url:"/admin/getUserInfo",method:"GET"})};var x=n(2415);i["default"].use(m.ZP);var y=new m.ZP.Store({state:{token:"",userInfo:{}},getters:{nickname:e=>e.userInfo.nickname,username:e=>e.userInfo.username,permissiontype:e=>e.userInfo.permissiontype,permission:e=>e.userInfo.permission},mutations:{updateToken(e,t){e.token=t},updateUserInfo(e,t){e.userInfo=t}},actions:{async getUserInfoActions(e){const t=await b();e.commit("updateUserInfo",t.data)}},modules:{},plugins:[(0,x.Z)()]});i["default"].use(h.ZP);const w=new h.ZP({mode:"history",base:"/",routes:[{path:"/login",name:"login",component:()=>n.e(961).then(n.bind(n,1961))},{path:"/",component:()=>Promise.resolve().then(n.bind(n,3802)),redirect:"/home",children:[{path:"articles",name:"Articles",component:()=>Promise.resolve().then(n.bind(n,3044)),meta:{name:"内容管理"}},{path:"herbs",name:"herbs",component:()=>n.e(494).then(n.bind(n,8494)),meta:{name:"草药管理"}},{path:"herbsapproval",name:"herbsapproval",component:()=>n.e(82).then(n.bind(n,82)),meta:{name:"草药审批"}},{path:"articlesapproval",name:"articlesapproval",component:()=>n.e(280).then(n.bind(n,6280)),meta:{name:"审批管理"}},{path:"home",name:"Home",component:()=>n.e(690).then(n.bind(n,8690)),meta:{name:"首页"}},{path:"users",name:"Users",component:()=>n.e(825).then(n.bind(n,2825)),meta:{name:"用户管理"}},{path:"application",name:"Application",component:()=>n.e(698).then(n.bind(n,2698)),meta:{name:"管理员审核"}},{path:"permission",name:"Permission",component:()=>n.e(683).then(n.bind(n,4683)),meta:{name:"管理员申请"}}]},{path:"*",redirect:"/login"}]});let S=["/login"];w.beforeEach(((e,t,n)=>{const i=y.state.token;i?(i&&!y.state.userInfo.username&&y.dispatch("getUserInfoActions"),n()):S.includes(e.path)?n():n("/login")}));var A=w,k=n(7715),_=n.n(k);i["default"].prototype.$axios=v,i["default"].use(_()),i["default"].config.productionTip=!1,i["default"].use(s()),new i["default"]({router:A,store:y,render:e=>e(p)}).$mount("#app")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e=[];n.O=function(t,i,r,s){if(!i){var o=1/0;for(u=0;u<e.length;u++){i=e[u][0],r=e[u][1],s=e[u][2];for(var a=!0,l=0;l<i.length;l++)(!1&s||o>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(a=!1,s<o&&(o=s));if(a){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[i,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{82:"8c971813",280:"034f543a",494:"4466d514",683:"bcaa8786",690:"a027ba18",698:"0c04ce6e",825:"8ffd348b",961:"3189e375"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{82:"7da9d107",280:"7da9d107",494:"6c44aa79",690:"691b8562",961:"fc31c471"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="app:";n.l=function(i,r,s,o){if(e[i])e[i].push(r);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+s){a=d;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[r];var p=function(t,n){a.onerror=a.onload=null,clearTimeout(h);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,i){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var s=function(s){if(r.onerror=r.onload=null,"load"===s.type)n();else{var o=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=a,r.parentNode.removeChild(r),i(l)}};return r.onerror=r.onload=s,r.href=t,document.head.appendChild(r),r},t=function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var r=n[i],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===e||s===t))return r}var o=document.getElementsByTagName("style");for(i=0;i<o.length;i++){r=o[i],s=r.getAttribute("data-href");if(s===e||s===t)return r}},i=function(i){return new Promise((function(r,s){var o=n.miniCssF(i),a=n.p+o;if(t(o,a))return r();e(i,a,r,s)}))},r={143:0};n.f.miniCss=function(e,t){var n={82:1,280:1,494:1,690:1,961:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=i(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=s);var o=n.p+n.u(t),a=new Error,l=function(i){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}};n.l(o,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,s,o=i[0],a=i[1],l=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)var u=l(n)}for(t&&t(i);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},i=self["webpackChunkapp"]=self["webpackChunkapp"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(2435)}));i=n.O(i)})();
//# sourceMappingURL=app.66bc59bc.js.map